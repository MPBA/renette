{% extends 'base.html' %}
{% load static %}
{% block container %}
{# TODO: Mettere sigma lib tutto sotto static! #}
<script type="application/javascript" src="{% static 'js/sigma.js' %}"></script>
<script type="application/javascript" src="{% static 'js/sigma.parseJson.js' %}"></script>
<script type="application/javascript">
jQuery(document).ready(function(){
  sigma.publicPrototype.myCircularLayout = function() {
    var R = 100,
        i = 0,
        L = this.getNodesCount();

    this.iterNodes(function(n){
      n.x = Math.cos(Math.PI*(i++)/L)*R;
      n.y = Math.sin(Math.PI*(i++)/L)*R;
    });

    return this.position(0,0,1).draw();
  };

// Instanciate sigma.js and customize rendering :
  sigInst = sigma.init(document.getElementById('sigma')).drawingProperties({
    defaultLabelColor: '#000',
    defaultLabelSize: 14,
    defaultLabelBGColor: '#fff',
    defaultLabelHoverColor: '#000',
    labelThreshold: 6,
    defaultEdgeType: 'curve',
    defaultEdgeColor: '#a1d99b',
    edgeColor: 'default'
  }).graphProperties({
    minNodeSize: 0.2,
    maxNodeSize: 8,
    minEdgeSize: 1,
    maxEdgeSize: 5,
    sideMargin: 50
  }).mouseProperties({
    maxRatio: 32
  });

  // Parse a GEXF encoded file to fill the graph
  // (requires "sigma.parseGexf.js" to be included)
  sigInst.parseJson('{% get_media_prefix %}{{ url }}');

  // Draw the graph :
  sigInst.draw();
});
</script>
<style type="text/css">
  /* sigma.js context : */
  .sigma-parent {
    position: relative;
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
{#    background: #222;#}
    height: 600px;
  }
  .sigma-expand {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }
  .buttons-container{
    padding-bottom: 8px;
    padding-top: 12px;
  }
</style>
<div class="span12" >
    <h1>{{ runp.process_name }} preview </h1>

</div>

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">#{{ idx }}. {{ key }}</h3>
        </div>
        <div class="panel-body">
             <div class="span12 sigma-parent" id="sigma-example-parent">
               <div class="sigma-expand" id="sigma"></div>
            </div>
        </div>
    </div>
{% endblock %}